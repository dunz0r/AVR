   1               		.file	"usart.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  80               	.global	init_usart
  82               	init_usart:
   1:usart.c       **** /*
   2:usart.c       ****  * File Name : uart.c
   3:usart.c       ****  * Purpose : Functions for USART
   4:usart.c       ****  * Creation Date : 30-08-2012
   5:usart.c       ****  * Last Modified : Wed 16 Jan 2013 21:30:00 CET
   6:usart.c       ****  * Created By : Gabriel Fornaeus, <gf@hax0r.se>
   7:usart.c       ****  *
   8:usart.c       ****  */
   9:usart.c       **** #include "usart.h"
  10:usart.c       **** 
  11:usart.c       **** /*{{{ Initialize usart */
  12:usart.c       **** void init_usart(void)
  13:usart.c       **** {
  84               	.LM0:
  85               	.LFBB1:
  86               	/* prologue: function */
  87               	/* frame size = 0 */
  88               	/* stack size = 0 */
  89               	.L__stack_usage = 0
  14:usart.c       **** 	/* Set baud rate */
  15:usart.c       **** 	UBRR0 = UBRR_VALUE;
  91               	.LM1:
  92 0000 87E6      		ldi r24,lo8(103)
  93 0002 90E0      		ldi r25,0
  94 0004 9093 C500 		sts 196+1,r25
  95 0008 8093 C400 		sts 196,r24
  16:usart.c       **** 	/* Set frame format to 8 data bits, no parity, 1 stop bit */
  17:usart.c       **** 	UCSR0C |= (1<<UCSZ01)|(1<<UCSZ01);
  97               	.LM2:
  98 000c E2EC      		ldi r30,lo8(-62)
  99 000e F0E0      		ldi r31,0
 100 0010 8081      		ld r24,Z
 101 0012 8460      		ori r24,lo8(4)
 102 0014 8083      		st Z,r24
  18:usart.c       **** 	/* enable transmission and reception */
  19:usart.c       **** 	UCSR0B |= (1<<RXEN0)|(1<<TXEN0);
 104               	.LM3:
 105 0016 E1EC      		ldi r30,lo8(-63)
 106 0018 F0E0      		ldi r31,0
 107 001a 8081      		ld r24,Z
 108 001c 8861      		ori r24,lo8(24)
 109 001e 8083      		st Z,r24
 110 0020 0895      		ret
 112               	.Lscope1:
 116               	.global	usart0_sendbyte
 118               	usart0_sendbyte:
  20:usart.c       **** }
  21:usart.c       **** /*}}}*/
  22:usart.c       **** 
  23:usart.c       **** /*{{{ Sends a byte over usart0 */
  24:usart.c       **** int usart0_sendbyte(char u8_data, FILE *stream)
  25:usart.c       **** {
 120               	.LM4:
 121               	.LFBB2:
 122 0022 CF93      		push r28
 123               	/* prologue: function */
 124               	/* frame size = 0 */
 125               	/* stack size = 1 */
 126               	.L__stack_usage = 1
 127 0024 C82F      		mov r28,r24
  26:usart.c       **** 	if(u8_data == '\n')
 129               	.LM5:
 130 0026 8A30      		cpi r24,lo8(10)
 131 0028 01F4      		brne .L7
  27:usart.c       **** 	{
  28:usart.c       **** 		usart0_sendbyte('\r', stream);
 133               	.LM6:
 134 002a 8DE0      		ldi r24,lo8(13)
 135 002c 0E94 0000 		call usart0_sendbyte
 136               	.L7:
  29:usart.c       **** 	}
  30:usart.c       **** 	// wait while previous byte is completed
  31:usart.c       **** 	while(!(UCSR0A&(1<<UDRE0)));
 138               	.LM7:
 139 0030 8091 C000 		lds r24,192
 140 0034 85FF      		sbrs r24,5
 141 0036 00C0      		rjmp .L7
  32:usart.c       **** 	UDR0 = u8_data;
 143               	.LM8:
 144 0038 C093 C600 		sts 198,r28
  33:usart.c       **** 	return 0;
  34:usart.c       **** }
 146               	.LM9:
 147 003c 80E0      		ldi r24,0
 148 003e 90E0      		ldi r25,0
 149               	/* epilogue start */
 150 0040 CF91      		pop r28
 151 0042 0895      		ret
 153               	.Lscope2:
 155               	.Letext0:
 156               		.ident	"GCC: (GNU) 4.7.2"
DEFINED SYMBOLS
                            *ABS*:00000000 usart.c
     /tmp/ccmBVLkY.s:2      *ABS*:0000003e __SP_H__
     /tmp/ccmBVLkY.s:3      *ABS*:0000003d __SP_L__
     /tmp/ccmBVLkY.s:4      *ABS*:0000003f __SREG__
     /tmp/ccmBVLkY.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccmBVLkY.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccmBVLkY.s:82     .text:00000000 init_usart
     /tmp/ccmBVLkY.s:118    .text:00000022 usart0_sendbyte

NO UNDEFINED SYMBOLS
